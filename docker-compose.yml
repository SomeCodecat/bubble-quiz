services:
  bubble-quiz:
    image: ghcr.io/somecodecat/bubble-quiz:latest

    container_name: bubble-quiz
    restart: unless-stopped

    ports:
      - "${BUBBLE_QUIZ_PORT:-5451}:3000"
    networks:
      - local-stack

    volumes:
      - ${BUBBLE_QUIZ_DATA_PATH}:/app/data
      - ${BACKUP_DIR}:/app/backups

    env_file: .env

    environment:
      # Override BACKUP_DIR inside the container to match the volume mount point
      - BACKUP_DIR=/app/backups
      # Ensure NODE_ENV is production
      - NODE_ENV=production

networks:
  local-stack: {}
